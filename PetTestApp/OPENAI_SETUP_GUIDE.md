# OpenAI API 设置指南

## 🎯 **目标**
在移动端使用 OpenAI GPT-3.5-turbo 模型进行 AI 聊天。

## ✅ **优势**
- **移动端完全兼容** - 直接 HTTP 调用，无兼容性问题
- **响应速度快** - GPT-3.5-turbo 优化性能
- **质量高** - 业界领先的 AI 模型
- **设置简单** - 只需 API Key
- **成本低** - 按使用量计费

## 🚀 **快速开始**

### **步骤 1：获取 OpenAI API Key**

1. **访问 OpenAI 平台**
   - 打开 https://platform.openai.com
   - 点击 "Sign up" 注册账户（或登录）

2. **创建 API Key**
   - 登录后，点击右上角头像
   - 选择 "View API keys"
   - 点击 "Create new secret key"
   - 输入名称（如 "PetTestApp"）
   - 复制生成的 API Key（以 `sk-` 开头）

3. **设置计费**
   - 在左侧菜单选择 "Billing"
   - 添加支付方式
   - 设置使用限制（推荐）

### **步骤 2：在应用中配置**

1. **打开 AI 设置**
   - 在应用中导航到 AI 设置页面
   - 或直接打开 `AISettings.tsx` 屏幕

2. **输入 API Key**
   - 在 "OpenAI API Key" 输入框中粘贴你的 Key
   - 点击 "保存" 按钮

3. **测试连接**
   - 点击 "测试" 按钮验证 Key 是否有效
   - 如果成功，状态会显示 "API Key 已配置"

## 💰 **成本说明**

### **GPT-3.5-turbo 定价**
- **输入**：$0.0015 / 1K tokens
- **输出**：$0.002 / 1K tokens

### **估算成本**
- 每次对话约 100-500 tokens
- 1000 次对话约 $1-5
- 非常经济实惠

### **设置使用限制**
1. 在 OpenAI 平台设置每月使用限制
2. 推荐设置 $10-20 的月度限制
3. 可以随时调整或暂停

## 🔧 **技术实现**

### **服务架构**
```
移动端 App → OpenAI API → GPT-3.5-turbo → 响应
```

### **调用流程**
1. 用户发送消息
2. 应用检查 OpenAI API Key
3. 调用 OpenAI API
4. 接收 AI 回复
5. 显示给用户

### **错误处理**
- API Key 无效 → 使用回退方案
- 网络错误 → 使用回退方案
- 配额超限 → 使用回退方案

## 🧪 **测试验证**

### **功能测试**
1. 发送简单问候："你好"
2. 发送专业问题："我的狗狗拉肚子怎么办？"
3. 发送英文问题："How to train my cat?"

### **性能测试**
- 响应时间：通常 1-3 秒
- 回复质量：专业、准确、有用
- 语言支持：中英文完美切换

## 🔒 **安全考虑**

### **API Key 保护**
- ✅ 本地加密存储
- ✅ 不在代码中硬编码
- ✅ 可以随时清除
- ✅ 支持重新配置

### **使用限制**
- 设置合理的月度限制
- 监控使用情况
- 及时调整配额

## 🆚 **与其他方案对比**

| 方案 | 设置难度 | 响应速度 | 质量 | 成本 | 移动端兼容性 |
|------|----------|----------|------|------|--------------|
| **OpenAI API** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| Firebase Functions | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| 本地回退 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

## 🎉 **成功标志**

配置成功后，你应该看到：
- ✅ 控制台显示 "🤖 尝试使用 OpenAI API"
- ✅ 然后是 "✅ OpenAI API 调用成功"
- ✅ 收到高质量的 AI 回复
- ✅ 支持复杂问题和多轮对话

## 🔄 **故障排除**

### **常见问题**

#### **1. API Key 无效**
```
Error: Invalid API key
```
**解决方案**：
- 检查 Key 是否正确复制
- 确认 Key 以 `sk-` 开头
- 重新生成新的 Key

#### **2. 配额超限**
```
Error: You exceeded your current quota
```
**解决方案**：
- 检查 OpenAI 账户余额
- 增加使用限制
- 等待下月重置

#### **3. 网络错误**
```
Error: Network request failed
```
**解决方案**：
- 检查网络连接
- 确认防火墙设置
- 尝试使用 VPN

## 📞 **支持资源**

- **OpenAI 文档**：https://platform.openai.com/docs
- **API 参考**：https://platform.openai.com/docs/api-reference
- **定价页面**：https://openai.com/pricing
- **状态页面**：https://status.openai.com

---

**现在你可以在移动端享受真正的 AI 聊天体验了！** 🚀 